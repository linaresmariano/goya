extends ../layout

block content
	script.
		function teachers($scope,$q,$http){
			
			$scope.teachers=!{JSON.stringify(teachers)};
			
			$scope.removeTeacher=function(id,index){
				var deferred = $q.defer();
					$http({
							url:"/teacher/remove",
							method:'put',
							data: { idTeacher:id}
						}).success(function(data) {
							
							deferred.resolve(index);
													
						}).error(function(err){
							alert("Error al borrar  un profesor");
						});
						
				var promise=deferred.promise;
				promise.then(function(index) {
								$scope.teachers.splice(index,1);
							});
			}

			
		}
	.container
		legend Seleccione un profesor
		div( ng-controller="teachers")
			div(ng-repeat='teacher in teachers track by $index')
				div
					.list-group-item {{teacher.name}} - {{teacher.code}}
						button.btn.btn-xs.btn-info.pull-right.button-option
							span.glyphicon.glyphicon-edit
						button.btn.btn-xs.btn-danger.pull-right.button-option(ng-click="removeTeacher(teacher.id,$index)")
							span.glyphicon.glyphicon-remove

		br
		a.btn.btn-success(href='../../../teacher/new')	Nuevo
  
  
